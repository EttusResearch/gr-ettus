# auto-generated by grc.converter

id: ettus_rfnoc_streamer_adder
label: 'RFNoC: Adder/Subtractor'

parameters:
-   id: type
    label: Host Data Type
    dtype: enum
    options: [fc32, sc16]
    option_labels: [Complex float32, Complex int16]
    option_attributes:
        type: [fc32, sc16]
    hide: part
-   id: block_index
    label: AddSub Select
    category: RFNoC Config
    dtype: int
    default: '-1'
    hide: ${ ('part' if int(block_index) < 0 else 'none') }
-   id: device_index
    label: Device Select
    category: RFNoC Config
    dtype: int
    default: '-1'
    hide: ${ ('part' if int(device_index) < 0 else 'none') }
-   id: fpga_module_name
    label: FPGA Module Name
    category: RFNoC Config
    dtype: string
    default: noc_block_addsub
    hide: all

inputs:
-   domain: rfnoc
    dtype: ${ type.type }
    multiplicity: '2'

outputs:
-   label: sum
    domain: rfnoc
    dtype: ${ type.type }
-   label: diff
    domain: rfnoc
    dtype: ${ type.type }
    optional: true

templates:
    imports: import ettus
    make: |-
        ettus.rfnoc_generic(
            self.device3,
            uhd.stream_args( # TX Stream Args
                cpu_format="${type}", # TODO: This must be made an option
                otw_format="sc16",
                channels=(0,1),
                args="align=1",
            ),
            uhd.stream_args( # RX Stream Args
                cpu_format="${type}",
                otw_format="sc16",
                channels=(0,1),
                args="align=1",
            ),
            "AddSub", ${block_index}, ${device_index},
        )

file_format: 1
