# auto-generated by grc.converter

id: ettus_rfnoc_ofdm_eq
label: 'RFNoC: OFDM Equalizer'

parameters:
-   id: fft_size
    label: FFT Size
    dtype: int
    default: '64'
    options: ['8', '16', '32', '64', '128', '256', '512', '1024', '2048', '4096']
    hide: ${ 'part' if vlen == 1 else 'none' }
-   id: block_index
    label: Block Select
    category: RFNoC Config
    dtype: int
    default: '-1'
    hide: ${ ('part' if int(block_index) < 0 else 'none') }
-   id: device_index
    label: Device Select
    category: RFNoC Config
    dtype: int
    default: '-1'
    hide: ${ ('part' if int(device_index) < 0 else 'none') }
-   id: fpga_module_name
    label: FPGA Module Name
    category: RFNoC Config
    dtype: string
    default: noc_block_ofdmequ
    hide: all

inputs:
-   domain: rfnoc
    dtype: complex
    vlen: ${ fft_size }

outputs:
-   domain: rfnoc
    dtype: complex
    vlen: ${ fft_size }
asserts:
- ${ fft_size in [2**n for n in range(3, 11)] }

templates:
    imports: import ettus
    make: |-
        ettus.rfnoc_generic(
            self.device3,
            uhd.stream_args( # TX Stream Args
                cpu_format="fc32", # TODO: This must be made an option
                otw_format="sc16",
                args="",
            ),
            uhd.stream_args( # RX Stream Args
                cpu_format="fc32", # TODO: This must be made an option
                otw_format="sc16",
                args="",
            ),
            "OFDMEq", ${block_index}, ${device_index},
        )

file_format: 1
